# Migration `20200828184931-init`

This migration has been generated by Amenemhat at 8/28/2020, 9:49:31 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "gameSities"."Profile" DROP CONSTRAINT "Profile_usersId_fkey"

CREATE TABLE "gameSities"."botContext" (
"id" SERIAL,
"Translate" text  NOT NULL ,
"ChatID" Decimal(65,30)  NOT NULL ,
"Text" text  NOT NULL ,
"UserName" text  NOT NULL ,
"highScore" Decimal(65,30)  NOT NULL ,
"sessionsId" integer  NOT NULL ,
PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "botContext.ChatID_unique" ON "gameSities"."botContext"("ChatID")

CREATE UNIQUE INDEX "Sessions.ChatID_unique" ON "gameSities"."Sessions"("ChatID")

ALTER TABLE "gameSities"."botContext" ADD FOREIGN KEY ("sessionsId")REFERENCES "gameSities"."Sessions"("id") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "gameSities"."Profile";

DROP TABLE "gameSities"."Users";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200820100430-init..20200828184931-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,30 +3,24 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Sessions {
   id             Int     @default(autoincrement()) @id
-  ChatID         Float
+  ChatID         Float  @unique
   spentCities    Json?
   lastLetter     String?
   scoreInSession Float?
 }
-model Users {
-  id        Int     @default(autoincrement()) @id
-  UserName  String?
-  ChatID    Float
-  Language  String?
-  HighScore Float?
-  profile  Profile?
-  email  String?   @unique
-}
-
-model Profile {
+model botContext {
   id   Int    @default(autoincrement()) @id
-  fullName  String
-  user Users
+  Translate  String
+  ChatID Float  @unique
+  Text String
+  Sessions Sessions
+  UserName String
+  highScore Float
 }
```



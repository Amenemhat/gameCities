# Migration `20200901184706-init`

This migration has been generated by Amenemhat at 9/1/2020, 9:47:06 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "gameSities"."botContext" DROP CONSTRAINT "botContext_sessionsId_fkey"

CREATE TABLE "gameSities"."sessions" (
"id" SERIAL,
"ChatID" integer  NOT NULL ,
"spentCities" jsonb   ,
"lastLetter" text   ,
"scoreInSession" integer   ,
PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "sessions.ChatID_unique" ON "gameSities"."sessions"("ChatID")

ALTER TABLE "gameSities"."botContext" ADD FOREIGN KEY ("sessionsId")REFERENCES "gameSities"."sessions"("id") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "gameSities"."Sessions";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200901173931-init..20200901184706-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,17 +3,19 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Sessions {
   id             Int     @default(autoincrement()) @id
   ChatID         Int  @unique
   spentCities    Json?
   lastLetter     String?
   scoreInSession Int?
+
+  @@map("sessions")
 }
 model botContext {
   id              Int    @default(autoincrement()) @id
@@ -22,5 +24,7 @@
   text            String
   sessions        Sessions
   userName        String
   highScore       Int
+
+  @@map("botContext")
 }
```


